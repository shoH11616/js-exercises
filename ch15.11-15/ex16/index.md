# オリジン間リソース共有（CORS）について

## 1. クロスオリジンリクエストに制約が無かった場合の問題

### セキュリティリスク

- **クロスサイトリクエストフォージェリ（CSRF）**:
  - 悪意のあるウェブサイトが、ユーザーの認証情報を利用して別のサイトにリクエストを送信することが可能になる。これにより、ユーザーの意図しない操作が行われるリスクがある。
- **クロスサイトスクリプティング（XSS）**:
  - 悪意のあるスクリプトが別のオリジンから読み込まれ、ユーザーのデータを盗む、セッションを乗っ取るなどの攻撃が可能になる。

### プライバシーの侵害

- **ユーザーデータの漏洩**:
  - ユーザーのプライベートデータが、ユーザーの意図しない形で他のオリジンに送信される可能性がある。これにより、個人情報が漏洩するリスクが高まる。

### データの整合性

- **データの改ざん**:
  - 信頼できないオリジンからのリクエストにより、データが不正に変更される可能性がある。これにより、データの整合性が損なわれるリスクがある。

## 2. クロスオリジンリクエストでメソッドやリクエストの内容によってPreflightリクエストの有無が異なる理由

### Preflightリクエストの目的

- **セキュリティの確保**:
  - Preflightリクエストは、実際のリクエストを送信する前に、サーバーがそのリクエストを受け入れるかどうかを確認するためのもの。これにより、サーバーが意図しないリクエストを受け入れるリスクを軽減する。

### メソッドによる違い

- **安全なメソッド（`GET`, `HEAD`）**:

  - これらのメソッドは、データの取得のみを行い、サーバーの状態を変更しないため、通常はPreflightリクエストが不要。

- **非安全なメソッド（`POST`, `PUT`, `DELETE`）**:
  - これらのメソッドは、サーバーの状態を変更する可能性があるため、Preflightリクエストが必要。これにより、サーバーがそのリクエストを受け入れるかどうかを事前に確認する。

### リクエストの内容による違い

- **単純リクエスト**:

  - `Content-Type`が`application/x-www-form-urlencoded`, `multipart/form-data`, `text/plain`のいずれかである場合、Preflightリクエストは不要。

- **複雑なリクエスト**:
  - 上記以外の`Content-Type`やカスタムヘッダーを含むリクエストは、Preflightリクエストが必要。これにより、サーバーがそのリクエストを受け入れるかどうかを事前に確認する。
